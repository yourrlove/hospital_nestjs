<%- include('./includes/head.ejs') %>
<link rel="stylesheet" href="/css/reception.css">
</head>
<body>
    <%- include('./includes/navigation.ejs') %>
    <main>
        <div class="container mb-5">
          <div class="pt-5d-grid gap-2 d-md-flex justify-content-md-end">
            <a href="/admin/reception?move=true" class="btn btn-success">Move</a>
          </div>
          <%- include('./includes/queue_patients.ejs') %>
        </div>

        <div class="container pt-5">
          <div class="row row-cols-1 row-cols-md-2 g-4">
            <% if(rooms.length > 0) { %>
              <% for(let room of rooms) { %>
                <div class="card mb-3" style="max-width: 540px; margin-right: 100px;">
                  <div class="row g-0">
                    <div class="col-md-4">
                      <img src="https://cdn-icons-png.flaticon.com/512/3774/3774299.png" class="img-fluid rounded-start" alt="">
                    </div>
                    <div class="col-md-8">
                      <div class="card-body">
                        <h5 class="card-title">Khoa: <%= room.specialist %></h5>
                        <p class="card-text">Doctor: <%= room.doctor %></p>
                        <p class="card-text">Slots: 
                        <!-- Empty Slot Indicator -->  
                        <% for(let empty = 0, fill = 0; empty < room.max_slot; empty++) { %>
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square" viewBox="0 0 16 16">
                            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                            <% if(fill < room.cur_slot) { %>
                              <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>
                              <% fill++ %>
                            <% } %>
                          </svg>
                        <% } %>  
                        </p>
                        <a href="/admin/doctor_room/<%= room._id %>" class="btn btn-success">Detail</a>
                      </div>
                    </div>
                  </div>
                </div>
              <% } %>
            <% } %>    
          </div>   
        </div>
    </main>
<% -include('./includes/end.ejs') %>